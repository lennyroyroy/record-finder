<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Feature Previews — Spin or Stream</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Fraunces:ital,opsz,wght@0,9..144,300;0,9..144,400;0,9..144,700;1,9..144,300;1,9..144,400&family=DM+Mono:ital,wght@0,400;0,500;1,400&display=swap" rel="stylesheet">
  <style>
    *, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }

    :root {
      --bg:          #1c1814;
      --surface:     #242018;
      --surface2:    #2c2820;
      --border:      #3a3530;
      --text:        #f0e8d8;
      --text-muted:  #9a8f80;
      --text-dim:    #6a6058;
      --accent:      #e07840;
      --accent-dim:  #9a4e1e;
      --teal:        #4a9080;
      --teal-dim:    #2a5548;
      --danger:      #c0504a;
      --gold:        #c8a84b;
      --radius:      8px;
      --radius-lg:   14px;
    }

    html, body { background: var(--bg); color: var(--text); font-family: 'DM Mono', monospace; line-height: 1.5; -webkit-font-smoothing: antialiased; }

    /* ── PAGE LAYOUT ── */
    .page { max-width: 860px; margin: 0 auto; padding: 48px 32px 80px; }

    .page-header { margin-bottom: 48px; border-bottom: 1px solid var(--border); padding-bottom: 24px; }
    .page-header h1 { font-family: 'Fraunces', serif; font-size: 28px; font-weight: 400; color: var(--text); margin-bottom: 6px; }
    .page-header p { font-size: 11px; color: var(--text-muted); }

    /* Table of contents */
    .toc { display: flex; flex-wrap: wrap; gap: 8px; margin-bottom: 48px; }
    .toc a { font-size: 9px; text-transform: uppercase; letter-spacing: 0.08em; color: var(--text-muted); background: var(--surface); border: 1px solid var(--border); border-radius: 20px; padding: 5px 10px; text-decoration: none; transition: color 0.15s, border-color 0.15s; }
    .toc a:hover { color: var(--text); border-color: var(--text-muted); }

    /* ── FEATURE SECTIONS ── */
    .feature-section { margin-bottom: 64px; }
    .feature-label { font-size: 9px; text-transform: uppercase; letter-spacing: 0.12em; color: var(--accent); margin-bottom: 6px; display: flex; align-items: center; gap: 8px; }
    .shipped-badge { font-size: 8px; letter-spacing: 0.06em; background: rgba(74,144,128,0.15); border: 1px solid rgba(74,144,128,0.4); color: var(--teal); border-radius: 20px; padding: 2px 8px; text-transform: uppercase; }
    .feature-title { font-family: 'Fraunces', serif; font-size: 20px; font-weight: 400; color: var(--text); margin-bottom: 6px; }
    .feature-desc { font-size: 10px; color: var(--text-muted); margin-bottom: 20px; line-height: 1.7; max-width: 560px; }
    .preview-box { background: var(--surface); border: 1px solid var(--border); border-radius: var(--radius-lg); padding: 24px; }
    .preview-label { font-size: 9px; text-transform: uppercase; letter-spacing: 0.1em; color: var(--text-dim); margin-bottom: 12px; }

    /* ── CARDS ── */
    .card { background: var(--surface2); border: 1px solid var(--border); border-radius: var(--radius-lg); padding: 18px; margin-bottom: 10px; }
    .card:last-child { margin-bottom: 0; }
    .card-header { display: flex; align-items: flex-start; justify-content: space-between; gap: 12px; margin-bottom: 12px; }
    .card-art { width: 72px; height: 72px; flex-shrink: 0; border-radius: 8px; border: 1px solid var(--border); overflow: hidden; }
    .card-info { flex: 1; min-width: 0; }
    .card-title { font-family: 'Fraunces', serif; font-size: 16px; font-weight: 400; color: var(--text); line-height: 1.3; }
    .card-artist { font-size: 11px; color: var(--text-muted); margin-top: 2px; margin-bottom: 6px; }
    .chips { display: flex; gap: 5px; flex-wrap: wrap; margin-top: 4px; }
    .chip { font-size: 9px; text-transform: uppercase; letter-spacing: 0.08em; padding: 3px 7px; border-radius: 20px; border: 1px solid var(--border); color: var(--text-muted); white-space: nowrap; }
    .chip.teal { color: var(--teal); border-color: rgba(74,144,128,0.35); background: rgba(74,144,128,0.08); }
    .chip.accent { color: var(--accent); border-color: rgba(224,120,64,0.35); background: rgba(224,120,64,0.08); }
    .chip.warning { color: var(--gold); border-color: rgba(200,168,75,0.35); background: rgba(200,168,75,0.08); }
    .chip.savings { color: #6aadcc; border-color: rgba(106,173,204,0.35); background: rgba(106,173,204,0.08); }
    .chip.danger { color: var(--danger); border-color: rgba(192,80,74,0.35); background: rgba(192,80,74,0.08); }

    .card-actions-row { display: flex; align-items: center; justify-content: space-between; gap: 8px; margin-top: 12px; }
    .wantlist-right { display: flex; flex-direction: column; gap: 6px; min-width: 108px; }

    /* ── BUTTONS ── */
    .btn { font-family: 'DM Mono', monospace; font-size: 10px; letter-spacing: 0.04em; cursor: pointer; border-radius: var(--radius); padding: 7px 14px; border: 1px solid; transition: opacity 0.15s; white-space: nowrap; }
    .btn-search { background: var(--accent); border-color: var(--accent); color: #fff; font-size: 10px; font-weight: 500; }
    .btn-secondary { background: none; border-color: var(--border); color: var(--text-muted); }
    .btn-secondary:hover { border-color: var(--text-muted); color: var(--text); }
    .btn-sync { background: rgba(74,144,128,0.12); border-color: rgba(74,144,128,0.35); color: var(--teal); }
    .btn-listen { background: none; border: 1px solid var(--border); color: var(--text-muted); font-family: 'DM Mono', monospace; font-size: 10px; border-radius: 20px; padding: 6px 12px; cursor: pointer; display: flex; align-items: center; gap: 5px; justify-content: center; width: 100%; }
    .btn-danger { background: none; border-color: rgba(192,80,74,0.35); color: var(--danger); }

    /* ── PRICE GRID ── */
    .price-grid { display: grid; grid-template-columns: repeat(3, 1fr); gap: 8px; margin-top: 14px; padding-top: 14px; border-top: 1px solid var(--border); }
    .price-cell { background: var(--bg); border: 1px solid var(--border); border-radius: var(--radius); padding: 11px 13px; }
    .price-label { font-size: 9px; letter-spacing: 0.1em; text-transform: uppercase; color: var(--text-dim); margin-bottom: 4px; }
    .price-value { font-family: 'Fraunces', serif; font-size: 20px; font-weight: 700; letter-spacing: -0.02em; }
    .price-value.best { color: var(--teal); }
    .price-value.mid  { color: var(--text); }
    .price-value.high { color: var(--accent); }
    .price-sub { font-size: 9px; color: var(--text-dim); margin-top: 2px; }

    /* ── SECTION LABEL ── */
    .section-label { font-size: 9px; text-transform: uppercase; letter-spacing: 0.1em; color: var(--text-dim); display: flex; align-items: center; gap: 8px; margin: 14px 0 10px; }
    .section-label::after { content: ''; flex: 1; height: 1px; background: var(--border); }

    /* ── DIVIDER ── */
    .divider { height: 1px; background: var(--border); margin: 32px 0; }

    /* ── VINYL PLACEHOLDER ── */
    .vinyl-ph { flex-shrink: 0; }

    /* ── FEATURE 1: SEARCH BAR ── */
    .search-wrap { position: relative; display: flex; align-items: center; gap: 8px; margin-bottom: 14px; }
    .search-icon { font-size: 14px; color: var(--text-dim); flex-shrink: 0; }
    .search-input { flex: 1; background: var(--surface2); border: 1px solid var(--border); border-radius: var(--radius); padding: 8px 12px; font-family: 'DM Mono', monospace; font-size: 11px; color: var(--text); outline: none; transition: border-color 0.15s; }
    .search-input:focus { border-color: var(--text-muted); }
    .search-input::placeholder { color: var(--text-dim); }
    .search-count { font-size: 10px; color: var(--text-dim); flex-shrink: 0; white-space: nowrap; }

    /* ── FEATURE 2: SORT PILLS ── */
    .toolbar { display: flex; align-items: center; justify-content: space-between; gap: 10px; margin-bottom: 14px; flex-wrap: wrap; }
    .sort-group { display: flex; gap: 5px; }
    .sort-pill { font-family: 'DM Mono', monospace; font-size: 9px; text-transform: uppercase; letter-spacing: 0.06em; background: none; border: 1px solid var(--border); color: var(--text-dim); border-radius: 20px; padding: 4px 10px; cursor: pointer; transition: all 0.15s; }
    .sort-pill.active { color: var(--accent); border-color: rgba(224,120,64,0.45); background: rgba(224,120,64,0.08); }
    .sort-pill:hover:not(.active) { color: var(--text-muted); border-color: var(--text-dim); }
    .sort-pill.new { color: var(--teal); border-color: rgba(74,144,128,0.45); background: rgba(74,144,128,0.08); }

    /* ── FEATURE 3: ALREADY OWN WARNING ── */
    .already-own-bar { display: flex; align-items: center; gap: 7px; background: rgba(200,168,75,0.07); border: 1px solid rgba(200,168,75,0.25); border-radius: var(--radius); padding: 7px 12px; margin-bottom: 8px; font-size: 10px; color: var(--gold); }

    /* ── FEATURE 5: EXPORT BUTTON ── */
    .toolbar-right { display: flex; gap: 6px; align-items: center; }

    /* ── FEATURE 6: SCAN PROGRESS ── */
    .scan-progress-wrap { background: var(--surface2); border: 1px solid var(--border); border-radius: var(--radius); padding: 10px 14px; margin-bottom: 14px; }
    .scan-progress-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 7px; }
    .scan-progress-text { font-size: 10px; color: var(--text-muted); }
    .scan-progress-count { font-size: 10px; color: var(--text-dim); }
    .scan-progress-track { height: 3px; background: var(--border); border-radius: 2px; overflow: hidden; }
    .scan-progress-fill { height: 100%; background: linear-gradient(to right, var(--teal), var(--accent)); border-radius: 2px; transition: width 0.4s ease; }

    /* ── FEATURE 7: BEST DEAL BANNER ── */
    .best-deal-banner { display: flex; align-items: center; gap: 12px; background: rgba(74,144,128,0.07); border: 1px solid rgba(74,144,128,0.25); border-radius: var(--radius); padding: 10px 14px; margin-bottom: 14px; flex-wrap: wrap; }
    .best-deal-eyebrow { font-size: 8px; text-transform: uppercase; letter-spacing: 0.1em; color: var(--teal); white-space: nowrap; flex-shrink: 0; }
    .best-deal-item { font-family: 'Fraunces', serif; font-size: 13px; color: var(--text); flex: 1; min-width: 0; }
    .best-deal-price { font-size: 10px; color: var(--text-muted); white-space: nowrap; flex-shrink: 0; }
    .best-deal-link { font-size: 9px; color: var(--teal); text-decoration: none; white-space: nowrap; flex-shrink: 0; }

    /* ── FEATURE 8: LABEL FILTERS ── */
    .label-filters { display: flex; gap: 5px; flex-wrap: wrap; margin-bottom: 14px; }
    .label-chip { font-family: 'DM Mono', monospace; font-size: 9px; letter-spacing: 0.05em; background: none; border: 1px solid var(--border); color: var(--text-dim); border-radius: 20px; padding: 4px 10px; cursor: pointer; transition: all 0.15s; }
    .label-chip.active { color: var(--text); border-color: var(--text-muted); background: var(--surface); }
    .label-chip:hover:not(.active) { color: var(--text-muted); }

    /* ── FEATURE 9: BREAK-EVEN ── */
    .breakeven-widget { background: var(--bg); border: 1px solid var(--border); border-radius: var(--radius); padding: 13px 15px; margin-top: 14px; }
    .breakeven-title { font-size: 9px; text-transform: uppercase; letter-spacing: 0.1em; color: var(--text-dim); margin-bottom: 10px; }
    .breakeven-row { display: flex; justify-content: space-between; align-items: center; font-size: 11px; color: var(--text-muted); margin-bottom: 6px; }
    .breakeven-row span:last-child { color: var(--text); font-family: 'Fraunces', serif; }
    .breakeven-input-row { display: flex; align-items: center; gap: 4px; font-size: 11px; color: var(--text); font-family: 'Fraunces', serif; }
    .breakeven-input { width: 50px; background: var(--surface2); border: 1px solid var(--border); border-radius: 4px; padding: 3px 6px; font-family: 'Fraunces', serif; font-size: 11px; color: var(--text); outline: none; text-align: right; }
    .breakeven-result { margin-top: 10px; padding-top: 10px; border-top: 1px solid var(--border); font-family: 'Fraunces', serif; font-size: 15px; font-weight: 700; color: var(--teal); }
    .breakeven-result-sub { font-family: 'DM Mono', monospace; font-size: 9px; color: var(--text-dim); margin-top: 2px; }

    /* ── FEATURE 10: PWA ── */
    .pwa-banner { display: flex; align-items: center; gap: 14px; background: var(--surface); border: 1px solid var(--border); border-radius: var(--radius-lg); padding: 14px 18px; }
    .pwa-icon-wrap { width: 44px; height: 44px; background: var(--bg); border: 1px solid var(--border); border-radius: 10px; display: flex; align-items: center; justify-content: center; flex-shrink: 0; }
    .pwa-icon-inner { font-size: 20px; color: var(--accent); }
    .pwa-text { flex: 1; min-width: 0; }
    .pwa-title-text { font-family: 'Fraunces', serif; font-size: 14px; color: var(--text); }
    .pwa-sub { font-size: 9px; color: var(--text-dim); margin-top: 2px; }
    .pwa-dismiss { background: none; border: none; color: var(--text-dim); font-size: 16px; cursor: pointer; padding: 0 4px; flex-shrink: 0; }

    /* ── FIND ELSEWHERE ── */
    .find-retail { display: grid; grid-template-columns: repeat(3, 1fr); gap: 6px; }
    .find-streaming { display: grid; grid-template-columns: repeat(2, 1fr); gap: 6px; margin-top: 6px; padding-top: 8px; border-top: 1px solid var(--border); }
    .btn-brand { background: none; border: 1px solid; border-radius: var(--radius); font-family: 'DM Mono', monospace; font-size: 9px; font-weight: 500; letter-spacing: 0.04em; text-transform: uppercase; padding: 7px 10px; cursor: pointer; display: flex; align-items: center; justify-content: center; gap: 5px; white-space: nowrap; width: 100%; transition: opacity 0.15s; }
    .btn-brand:hover { opacity: 0.7; }
    .btn-brand-amazon  { color: #e47911; border-color: rgba(228,121,17,0.45); background: rgba(228,121,17,0.07); }
    .btn-brand-walmart { color: #0071dc; border-color: rgba(0,113,220,0.45);   background: rgba(0,113,220,0.07); }
    .btn-brand-target  { color: #cc0000; border-color: rgba(204,0,0,0.45);     background: rgba(204,0,0,0.07); }
    .btn-brand-bandcamp{ color: #1da0c3; border-color: rgba(29,160,195,0.45);  background: rgba(29,160,195,0.07); }
    .btn-brand-discogs { color: #ef6216; border-color: rgba(239,98,22,0.45);   background: rgba(239,98,22,0.07); }

    /* ── PROGRESS BAR ── */
    .progress-wrap { margin-top: 10px; }
    .progress-bar-label { display: flex; justify-content: space-between; font-size: 9px; color: var(--text-dim); margin-bottom: 5px; }
    .progress-bar-track { height: 4px; background: var(--border); border-radius: 2px; overflow: hidden; }
    .progress-bar-fill { height: 100%; background: linear-gradient(to right, var(--teal), var(--accent)); border-radius: 2px; }

    /* ── LISTING ROW ── */
    .listing-row { display: flex; justify-content: space-between; align-items: center; padding: 8px 12px; background: var(--bg); border: 1px solid var(--border); border-radius: var(--radius); margin-bottom: 4px; text-decoration: none; }
    .listing-origin { font-size: 11px; font-weight: 500; }
    .listing-origin.us { color: #6aadcc; }
    .listing-origin.intl { color: var(--text-muted); }
    .listing-count { font-size: 10px; color: var(--text-dim); margin-left: 8px; }
    .listing-price { font-family: 'Fraunces', serif; font-size: 16px; font-weight: 700; color: var(--text); }
    .listing-ship { font-size: 10px; color: var(--text-dim); margin-left: 6px; }

    /* ── INTEGRATED VIEW ── */
    .full-view { background: var(--bg); border: 2px solid var(--border); border-radius: var(--radius-lg); padding: 24px; }
    .full-view-title { font-family: 'Fraunces', serif; font-size: 22px; font-weight: 400; color: var(--text); margin-bottom: 4px; }
    .full-view-sub { font-size: 10px; color: var(--text-muted); margin-bottom: 24px; }

    .page-eyebrow { font-size: 9px; text-transform: uppercase; letter-spacing: 0.1em; color: var(--text-dim); margin-bottom: 4px; }

    /* fade for "not scanned yet" */
    .card.dim { opacity: 0.6; }

    /* ── MISC ── */
    .spacer { height: 24px; }
    .note { font-size: 9px; color: var(--text-dim); margin-top: 8px; font-style: italic; }
    .two-col { display: grid; grid-template-columns: 1fr 1fr; gap: 16px; }
    @media (max-width: 600px) { .two-col { grid-template-columns: 1fr; } }

    /* ── FEATURE 11: MUSIC DISCOVERY ── */
    .discover-filters { display: flex; gap: 5px; flex-wrap: wrap; margin-bottom: 16px; }
    .discover-filter { font-family: 'DM Mono', monospace; font-size: 9px; text-transform: uppercase; letter-spacing: 0.07em; background: none; border: 1px solid var(--border); color: var(--text-dim); border-radius: 20px; padding: 5px 12px; cursor: pointer; transition: all 0.15s; }
    .discover-filter:hover { color: var(--text-muted); border-color: var(--text-dim); }
    .discover-filter.active { color: var(--text); border-color: var(--text-muted); background: var(--surface2); }
    .discover-filter.bandcamp.active  { color: #1da0c3; border-color: rgba(29,160,195,0.5); background: rgba(29,160,195,0.08); }
    .discover-filter.pitchfork.active { color: #e07840; border-color: rgba(224,120,64,0.5); background: rgba(224,120,64,0.08); }
    .discover-filter.stereogum.active { color: #9a78c8; border-color: rgba(154,120,200,0.5); background: rgba(154,120,200,0.08); }

    .discover-card { background: var(--surface2); border: 1px solid var(--border); border-radius: var(--radius-lg); padding: 16px; margin-bottom: 8px; display: flex; gap: 14px; align-items: flex-start; }
    .discover-card:last-child { margin-bottom: 0; }
    .discover-art { width: 56px; height: 56px; flex-shrink: 0; border-radius: 6px; border: 1px solid var(--border); background: var(--bg); display: flex; align-items: center; justify-content: center; }
    .discover-art svg { opacity: 0.25; }
    .discover-body { flex: 1; min-width: 0; }
    .discover-title { font-family: 'Fraunces', serif; font-size: 15px; font-weight: 400; color: var(--text); line-height: 1.3; }
    .discover-artist { font-size: 11px; color: var(--text-muted); margin-top: 2px; margin-bottom: 7px; }
    .discover-meta { display: flex; align-items: center; gap: 5px; flex-wrap: wrap; }
    .source-badge { font-size: 8px; text-transform: uppercase; letter-spacing: 0.08em; padding: 2px 7px; border-radius: 20px; font-weight: 500; white-space: nowrap; }
    .source-badge.bandcamp  { color: #1da0c3; border: 1px solid rgba(29,160,195,0.4); background: rgba(29,160,195,0.08); }
    .source-badge.pitchfork { color: #e07840; border: 1px solid rgba(224,120,64,0.4); background: rgba(224,120,64,0.08); }
    .source-badge.stereogum { color: #9a78c8; border: 1px solid rgba(154,120,200,0.4); background: rgba(154,120,200,0.08); }
    .source-badge.multi     { color: var(--teal); border: 1px solid rgba(74,144,128,0.4); background: rgba(74,144,128,0.08); }
    .score-chip { font-family: 'Fraunces', serif; font-size: 11px; font-weight: 700; color: var(--accent); }
    .discover-actions { display: flex; align-items: center; justify-content: space-between; margin-top: 10px; }
    .btn-add-wantlist { background: none; border: 1px solid var(--border); color: var(--text-muted); font-family: 'DM Mono', monospace; font-size: 9px; letter-spacing: 0.05em; text-transform: uppercase; border-radius: 20px; padding: 5px 12px; cursor: pointer; transition: all 0.15s; }
    .btn-add-wantlist:hover { color: var(--teal); border-color: rgba(74,144,128,0.5); }
    .discover-date { font-size: 9px; color: var(--text-dim); }

    /* ── SETTINGS PANEL ── */
    .settings-panel { background: var(--bg); border: 2px solid var(--border); border-radius: var(--radius-lg); padding: 24px; }
    .settings-section-label { font-size: 9px; text-transform: uppercase; letter-spacing: 0.12em; color: var(--text-dim); margin-bottom: 14px; padding-bottom: 8px; border-bottom: 1px solid var(--border); }
    .settings-row { display: flex; align-items: flex-start; justify-content: space-between; gap: 16px; padding: 12px 0; border-bottom: 1px solid rgba(58,53,48,0.5); }
    .settings-row:last-child { border-bottom: none; }
    .settings-row-label { font-size: 12px; color: var(--text); margin-bottom: 3px; }
    .settings-row-desc  { font-size: 10px; color: var(--text-dim); line-height: 1.6; max-width: 360px; }
    .toggle-wrap { position: relative; width: 36px; height: 20px; flex-shrink: 0; margin-top: 2px; }
    .toggle-wrap input { opacity: 0; width: 0; height: 0; position: absolute; }
    .toggle-track { position: absolute; inset: 0; background: var(--surface2); border: 1px solid var(--border); border-radius: 20px; cursor: pointer; transition: background 0.2s, border-color 0.2s; }
    .toggle-track::after { content: ''; position: absolute; left: 2px; top: 2px; width: 14px; height: 14px; background: var(--text-dim); border-radius: 50%; transition: transform 0.2s, background 0.2s; }
    .toggle-wrap input:checked + .toggle-track { background: rgba(74,144,128,0.2); border-color: var(--teal); }
    .toggle-wrap input:checked + .toggle-track::after { transform: translateX(16px); background: var(--teal); }
  </style>
</head>
<body>
<div class="page">

  <!-- ── PAGE HEADER ── -->
  <div class="page-header">
    <h1>Feature Previews</h1>
    <p>Spin or Stream · Build Next candidates · Open this file in a browser to preview</p>
  </div>

  <!-- ── TABLE OF CONTENTS ── -->
  <nav class="toc">
    <a href="#f1">Search Bar ✓</a>
    <a href="#f2">Sort by Price ✓</a>
    <a href="#f3">Already Own This</a>
    <a href="#f4">Savings % Badge</a>
    <a href="#f5">Export CSV</a>
    <a href="#f6">Scan Progress</a>
    <a href="#f7">Best Deal Banner ✓</a>
    <a href="#f8">Label Filter</a>
    <a href="#f9">Break-even Calc</a>
    <a href="#f10">PWA Install ✓</a>
    <a href="#full-wantlist">Full Wantlist</a>
    <a href="#full-compare">Full Compare</a>
    <a href="#f11">Music Discovery ✓</a>
    <a href="#f-settings">Settings ✓</a>
  </nav>


  <!-- ══════════════════════════════════════════════════════════
       FEATURE 1 — SEARCH BAR
  ══════════════════════════════════════════════════════════ -->
  <div class="feature-section" id="f1">
    <div class="feature-label">Feature 01 <span class="shipped-badge">Shipped ✓</span></div>
    <div class="feature-title">Search Bar</div>
    <div class="feature-desc">A text input at the top of the Wantlist. Filters cards in real-time as you type — no server call needed. Shows a count of matching results. At 65+ items this is immediately useful.</div>

    <div class="preview-box">
      <div class="preview-label">Isolated — search bar component</div>
      <div class="search-wrap">
        <span class="search-icon">⌕</span>
        <input type="text" class="search-input" placeholder="Search your wantlist…" id="search-input" oninput="handleSearch(this.value)" />
        <span class="search-count" id="search-count">4 items</span>
      </div>

      <div id="search-results">
        <div class="card" data-title="love of my life nils landgren">
          <div class="card-header">
            <div style="display:flex;gap:12px;align-items:flex-start;flex:1;min-width:0">
              <svg class="vinyl-ph" width="48" height="48" viewBox="0 0 56 56" fill="none"><circle cx="28" cy="28" r="27.5" fill="#1c1814" stroke="#3a3530"/><circle cx="28" cy="28" r="20" fill="none" stroke="#3a3530" stroke-width="0.5" opacity="0.7"/><circle cx="28" cy="28" r="13" fill="none" stroke="#3a3530" stroke-width="0.5" opacity="0.5"/><circle cx="28" cy="28" r="8" fill="none" stroke="#e07840" stroke-width="1.5"/><circle cx="28" cy="28" r="3" fill="#9a4e1e"/></svg>
              <div><div class="card-title">Love of My Life</div><div class="card-artist">Nils Landgren</div><div class="chips"><span class="chip">Vinyl</span><span class="chip">ACT Music</span><span class="chip">2026</span></div></div>
            </div>
          </div>
        </div>
        <div class="card" data-title="kind of blue miles davis">
          <div class="card-header">
            <div style="display:flex;gap:12px;align-items:flex-start;flex:1;min-width:0">
              <svg class="vinyl-ph" width="48" height="48" viewBox="0 0 56 56" fill="none"><circle cx="28" cy="28" r="27.5" fill="#1c1814" stroke="#3a3530"/><circle cx="28" cy="28" r="20" fill="none" stroke="#3a3530" stroke-width="0.5" opacity="0.7"/><circle cx="28" cy="28" r="13" fill="none" stroke="#3a3530" stroke-width="0.5" opacity="0.5"/><circle cx="28" cy="28" r="8" fill="none" stroke="#e07840" stroke-width="1.5"/><circle cx="28" cy="28" r="3" fill="#9a4e1e"/></svg>
              <div><div class="card-title">Kind of Blue</div><div class="card-artist">Miles Davis</div><div class="chips"><span class="chip">Vinyl</span><span class="chip">Columbia</span><span class="chip">1959</span></div></div>
            </div>
          </div>
        </div>
        <div class="card" data-title="ok computer radiohead">
          <div class="card-header">
            <div style="display:flex;gap:12px;align-items:flex-start;flex:1;min-width:0">
              <svg class="vinyl-ph" width="48" height="48" viewBox="0 0 56 56" fill="none"><circle cx="28" cy="28" r="27.5" fill="#1c1814" stroke="#3a3530"/><circle cx="28" cy="28" r="20" fill="none" stroke="#3a3530" stroke-width="0.5" opacity="0.7"/><circle cx="28" cy="28" r="13" fill="none" stroke="#3a3530" stroke-width="0.5" opacity="0.5"/><circle cx="28" cy="28" r="8" fill="none" stroke="#e07840" stroke-width="1.5"/><circle cx="28" cy="28" r="3" fill="#9a4e1e"/></svg>
              <div><div class="card-title">OK Computer</div><div class="card-artist">Radiohead</div><div class="chips"><span class="chip">Vinyl</span><span class="chip">Parlophone</span><span class="chip">1997</span></div></div>
            </div>
          </div>
        </div>
        <div class="card" data-title="back to black amy winehouse">
          <div class="card-header">
            <div style="display:flex;gap:12px;align-items:flex-start;flex:1;min-width:0">
              <svg class="vinyl-ph" width="48" height="48" viewBox="0 0 56 56" fill="none"><circle cx="28" cy="28" r="27.5" fill="#1c1814" stroke="#3a3530"/><circle cx="28" cy="28" r="20" fill="none" stroke="#3a3530" stroke-width="0.5" opacity="0.7"/><circle cx="28" cy="28" r="13" fill="none" stroke="#3a3530" stroke-width="0.5" opacity="0.5"/><circle cx="28" cy="28" r="8" fill="none" stroke="#e07840" stroke-width="1.5"/><circle cx="28" cy="28" r="3" fill="#9a4e1e"/></svg>
              <div><div class="card-title">Back to Black</div><div class="card-artist">Amy Winehouse</div><div class="chips"><span class="chip">Vinyl</span><span class="chip">Island</span><span class="chip">2006</span></div></div>
            </div>
          </div>
        </div>
      </div>
      <p class="note">↑ Try typing in the search box above — cards filter live.</p>
    </div>
  </div>


  <!-- ══════════════════════════════════════════════════════════
       FEATURE 2 — SORT BY PRICE
  ══════════════════════════════════════════════════════════ -->
  <div class="feature-section" id="f2">
    <div class="feature-label">Feature 02 <span class="shipped-badge">Shipped ✓</span></div>
    <div class="feature-title">Sort by Price</div>
    <div class="feature-desc">Adds Price as a third sort option alongside the existing Year and Artist pills. When active, cards reorder cheapest-to-most-expensive (best total). Only useful after scan — the pill is dimmed for unscanned items.</div>

    <div class="preview-box">
      <div class="preview-label">Isolated — sort pills with price added</div>
      <div style="display:flex;gap:5px;flex-wrap:wrap;margin-bottom:16px">
        <button class="sort-pill" onclick="setSortActive(this)">Year ↑</button>
        <button class="sort-pill" onclick="setSortActive(this)">Artist ↑</button>
        <button class="sort-pill new active" onclick="setSortActive(this)">Price ↑</button>
      </div>

      <div class="card">
        <div class="card-header">
          <div style="display:flex;gap:12px;align-items:flex-start;flex:1;min-width:0">
            <svg class="vinyl-ph" width="48" height="48" viewBox="0 0 56 56" fill="none"><circle cx="28" cy="28" r="27.5" fill="#1c1814" stroke="#3a3530"/><circle cx="28" cy="28" r="20" fill="none" stroke="#3a3530" stroke-width="0.5" opacity="0.7"/><circle cx="28" cy="28" r="13" fill="none" stroke="#3a3530" stroke-width="0.5" opacity="0.5"/><circle cx="28" cy="28" r="8" fill="none" stroke="#e07840" stroke-width="1.5"/><circle cx="28" cy="28" r="3" fill="#9a4e1e"/></svg>
            <div><div class="card-title">Kind of Blue</div><div class="card-artist">Miles Davis</div><div class="chips"><span class="chip">Vinyl</span><span class="chip">Columbia</span><span class="chip">1959</span><span class="chip teal">8 listings</span></div></div>
          </div>
          <div style="display:flex;flex-direction:column;gap:6px;min-width:108px">
            <button class="btn btn-secondary" style="width:100%;font-size:10px">Refresh</button>
            <button class="btn-listen">▶ Listen</button>
          </div>
        </div>
        <div class="price-grid">
          <div class="price-cell"><div class="price-label">Best Total</div><div class="price-value best">$28.50</div><div class="price-sub">inc. shipping</div></div>
          <div class="price-cell"><div class="price-label">Record Only</div><div class="price-value mid">$18.50</div><div class="price-sub">lowest found</div></div>
          <div class="price-cell"><div class="price-label">Avg</div><div class="price-value high">$22.80</div><div class="price-sub">8 listings</div></div>
        </div>
      </div>
      <div class="card">
        <div class="card-header">
          <div style="display:flex;gap:12px;align-items:flex-start;flex:1;min-width:0">
            <svg class="vinyl-ph" width="48" height="48" viewBox="0 0 56 56" fill="none"><circle cx="28" cy="28" r="27.5" fill="#1c1814" stroke="#3a3530"/><circle cx="28" cy="28" r="20" fill="none" stroke="#3a3530" stroke-width="0.5" opacity="0.7"/><circle cx="28" cy="28" r="13" fill="none" stroke="#3a3530" stroke-width="0.5" opacity="0.5"/><circle cx="28" cy="28" r="8" fill="none" stroke="#e07840" stroke-width="1.5"/><circle cx="28" cy="28" r="3" fill="#9a4e1e"/></svg>
            <div><div class="card-title">Love of My Life</div><div class="card-artist">Nils Landgren</div><div class="chips"><span class="chip">Vinyl</span><span class="chip">ACT Music</span><span class="chip">2026</span><span class="chip teal">4 listings</span></div></div>
          </div>
          <div style="display:flex;flex-direction:column;gap:6px;min-width:108px">
            <button class="btn btn-secondary" style="width:100%;font-size:10px">Refresh</button>
            <button class="btn-listen">▶ Listen</button>
          </div>
        </div>
        <div class="price-grid">
          <div class="price-cell"><div class="price-label">Best Total</div><div class="price-value best">$54.58</div><div class="price-sub">inc. shipping</div></div>
          <div class="price-cell"><div class="price-label">Record Only</div><div class="price-value mid">$44.58</div><div class="price-sub">lowest found</div></div>
          <div class="price-cell"><div class="price-label">Avg</div><div class="price-value high">$45.81</div><div class="price-sub">4 listings</div></div>
        </div>
      </div>
      <p class="note">↑ Cards sorted by Best Total ascending. Miles Davis ($28.50) appears first.</p>
    </div>
  </div>


  <!-- ══════════════════════════════════════════════════════════
       FEATURE 3 — ALREADY OWN THIS
  ══════════════════════════════════════════════════════════ -->
  <div class="feature-section" id="f3">
    <div class="feature-label">Feature 03</div>
    <div class="feature-title">"Already Own This" Warning</div>
    <div class="feature-desc">Cross-checks the wantlist against the collection (both in localStorage). If a match is found by title or Discogs ID, a gold warning chip appears on the card. Prevents wasting time scanning something you already own.</div>

    <div class="preview-box">
      <div class="preview-label">In collection — warning chip in card header</div>
      <div class="card">
        <div class="card-header">
          <div style="display:flex;gap:12px;align-items:flex-start;flex:1;min-width:0">
            <svg class="vinyl-ph" width="48" height="48" viewBox="0 0 56 56" fill="none"><circle cx="28" cy="28" r="27.5" fill="#1c1814" stroke="#3a3530"/><circle cx="28" cy="28" r="20" fill="none" stroke="#3a3530" stroke-width="0.5" opacity="0.7"/><circle cx="28" cy="28" r="13" fill="none" stroke="#3a3530" stroke-width="0.5" opacity="0.5"/><circle cx="28" cy="28" r="8" fill="none" stroke="#e07840" stroke-width="1.5"/><circle cx="28" cy="28" r="3" fill="#9a4e1e"/></svg>
            <div>
              <div class="card-title">Kind of Blue</div>
              <div class="card-artist">Miles Davis</div>
              <div class="chips">
                <span class="chip">Vinyl</span>
                <span class="chip">Columbia</span>
                <span class="chip">1959</span>
                <span class="chip warning">✓ In collection</span>
              </div>
            </div>
          </div>
          <div style="display:flex;flex-direction:column;gap:6px;min-width:108px">
            <button class="btn btn-search" style="width:100%;font-size:10px">Check Prices</button>
            <button class="btn-listen">▶ Listen</button>
          </div>
        </div>
      </div>

      <div class="spacer"></div>
      <div class="preview-label">Not in collection — normal state</div>
      <div class="card">
        <div class="card-header">
          <div style="display:flex;gap:12px;align-items:flex-start;flex:1;min-width:0">
            <svg class="vinyl-ph" width="48" height="48" viewBox="0 0 56 56" fill="none"><circle cx="28" cy="28" r="27.5" fill="#1c1814" stroke="#3a3530"/><circle cx="28" cy="28" r="20" fill="none" stroke="#3a3530" stroke-width="0.5" opacity="0.7"/><circle cx="28" cy="28" r="13" fill="none" stroke="#3a3530" stroke-width="0.5" opacity="0.5"/><circle cx="28" cy="28" r="8" fill="none" stroke="#e07840" stroke-width="1.5"/><circle cx="28" cy="28" r="3" fill="#9a4e1e"/></svg>
            <div>
              <div class="card-title">Love of My Life</div>
              <div class="card-artist">Nils Landgren</div>
              <div class="chips"><span class="chip">Vinyl</span><span class="chip">ACT Music</span><span class="chip">2026</span></div>
            </div>
          </div>
          <div style="display:flex;flex-direction:column;gap:6px;min-width:108px">
            <button class="btn btn-search" style="width:100%;font-size:10px">Check Prices</button>
            <button class="btn-listen">▶ Listen</button>
          </div>
        </div>
      </div>
    </div>
  </div>


  <!-- ══════════════════════════════════════════════════════════
       FEATURE 4 — SAVINGS % BADGE
  ══════════════════════════════════════════════════════════ -->
  <div class="feature-section" id="f4">
    <div class="feature-label">Feature 04</div>
    <div class="feature-title">Savings % Badge</div>
    <div class="feature-desc">After scan, shows how far the best total sits below the average price. Calculated as: (avg − best total) ÷ avg × 100. Rendered as a chip. Gives instant context on whether a deal is actually good.</div>

    <div class="preview-box">
      <div class="two-col">
        <div>
          <div class="preview-label">Good deal — below avg</div>
          <div class="card">
            <div class="card-header">
              <div style="display:flex;gap:12px;align-items:flex-start;flex:1;min-width:0">
                <svg class="vinyl-ph" width="48" height="48" viewBox="0 0 56 56" fill="none"><circle cx="28" cy="28" r="27.5" fill="#1c1814" stroke="#3a3530"/><circle cx="28" cy="28" r="20" fill="none" stroke="#3a3530" stroke-width="0.5" opacity="0.7"/><circle cx="28" cy="28" r="13" fill="none" stroke="#3a3530" stroke-width="0.5" opacity="0.5"/><circle cx="28" cy="28" r="8" fill="none" stroke="#e07840" stroke-width="1.5"/><circle cx="28" cy="28" r="3" fill="#9a4e1e"/></svg>
                <div>
                  <div class="card-title">Kind of Blue</div>
                  <div class="card-artist">Miles Davis</div>
                  <div class="chips">
                    <span class="chip">1959</span>
                    <span class="chip savings">−19% vs avg</span>
                    <span class="chip teal">8 listings</span>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
        <div>
          <div class="preview-label">Near avg — neutral</div>
          <div class="card">
            <div class="card-header">
              <div style="display:flex;gap:12px;align-items:flex-start;flex:1;min-width:0">
                <svg class="vinyl-ph" width="48" height="48" viewBox="0 0 56 56" fill="none"><circle cx="28" cy="28" r="27.5" fill="#1c1814" stroke="#3a3530"/><circle cx="28" cy="28" r="20" fill="none" stroke="#3a3530" stroke-width="0.5" opacity="0.7"/><circle cx="28" cy="28" r="13" fill="none" stroke="#3a3530" stroke-width="0.5" opacity="0.5"/><circle cx="28" cy="28" r="8" fill="none" stroke="#e07840" stroke-width="1.5"/><circle cx="28" cy="28" r="3" fill="#9a4e1e"/></svg>
                <div>
                  <div class="card-title">Love of My Life</div>
                  <div class="card-artist">Nils Landgren</div>
                  <div class="chips">
                    <span class="chip">2026</span>
                    <span class="chip">−3% vs avg</span>
                    <span class="chip teal">4 listings</span>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
      <p class="note">↑ Blue chip = meaningful savings. Neutral chip = near avg. Only appears after scan.</p>
    </div>
  </div>


  <!-- ══════════════════════════════════════════════════════════
       FEATURE 5 — EXPORT CSV
  ══════════════════════════════════════════════════════════ -->
  <div class="feature-section" id="f5">
    <div class="feature-label">Feature 05</div>
    <div class="feature-title">Export to CSV</div>
    <div class="feature-desc">A button in the wantlist toolbar that generates and downloads a .csv file from the in-memory wantlist data. Pure frontend — no server call. Exports title, artist, year, label, format, best total, record price, avg, and listing count.</div>

    <div class="preview-box">
      <div class="preview-label">Toolbar with export button — wantlist header area</div>
      <div class="toolbar">
        <div>
          <div class="page-eyebrow">Your list</div>
          <div style="font-family:'Fraunces',serif;font-size:20px;color:var(--text)">Wantlist <em style="font-style:italic;color:var(--text-muted)">(65)</em></div>
        </div>
        <div class="toolbar-right">
          <button class="btn btn-secondary" style="font-size:9px;padding:6px 12px;display:flex;align-items:center;gap:5px">↓ Export CSV</button>
          <button class="btn btn-search" style="font-size:10px">Scan All</button>
        </div>
      </div>
      <p class="note">↑ Export sits alongside Scan All in the page header. Generates a .csv download — no backend needed.</p>
    </div>
  </div>


  <!-- ══════════════════════════════════════════════════════════
       FEATURE 6 — SCAN-ALL PROGRESS
  ══════════════════════════════════════════════════════════ -->
  <div class="feature-section" id="f6">
    <div class="feature-label">Feature 06</div>
    <div class="feature-title">Scan-All Progress Indicator</div>
    <div class="feature-desc">During batch scan, replaces the per-card spinners with a single progress bar and counter at the top of the wantlist. Shows X of Y with the current record name. Much clearer than watching 12 cards spin simultaneously.</div>

    <div class="preview-box">
      <div class="preview-label">Mid-scan state — 8 of 12 complete</div>
      <div class="scan-progress-wrap">
        <div class="scan-progress-header">
          <span class="scan-progress-text">Scanning <strong style="color:var(--text)">OK Computer</strong>…</span>
          <span class="scan-progress-count">8 of 12</span>
        </div>
        <div class="scan-progress-track">
          <div class="scan-progress-fill" style="width:67%"></div>
        </div>
      </div>

      <div class="spacer"></div>
      <div class="preview-label">Completed state — all done</div>
      <div class="scan-progress-wrap" style="background:rgba(74,144,128,0.06);border-color:rgba(74,144,128,0.25)">
        <div class="scan-progress-header">
          <span class="scan-progress-text" style="color:var(--teal)">✓ Scan complete</span>
          <span class="scan-progress-count">12 of 12</span>
        </div>
        <div class="scan-progress-track">
          <div class="scan-progress-fill" style="width:100%"></div>
        </div>
      </div>
    </div>
  </div>


  <!-- ══════════════════════════════════════════════════════════
       FEATURE 7 — BEST DEAL BANNER
  ══════════════════════════════════════════════════════════ -->
  <div class="feature-section" id="f7">
    <div class="feature-label">Feature 07 <span class="shipped-badge">Shipped ✓</span></div>
    <div class="feature-title">"Today's Best Deal" Banner</div>
    <div class="feature-desc">A pinned one-liner at the top of the wantlist, computed from scan data already in localStorage. Surfaces the single best opportunity — cheapest best-total across all scanned items — so the most important thing is always visible without scrolling.</div>

    <div class="preview-box">
      <div class="preview-label">Banner — above the card list</div>
      <div class="best-deal-banner">
        <span class="best-deal-eyebrow">Best deal</span>
        <span class="best-deal-item">Miles Davis — Kind of Blue</span>
        <span class="best-deal-price">$28.50 inc. shipping · US seller</span>
        <a href="#" class="best-deal-link">View →</a>
      </div>
      <div class="card">
        <div class="card-header">
          <div style="display:flex;gap:12px;align-items:flex-start;flex:1;min-width:0">
            <svg class="vinyl-ph" width="48" height="48" viewBox="0 0 56 56" fill="none"><circle cx="28" cy="28" r="27.5" fill="#1c1814" stroke="#3a3530"/><circle cx="28" cy="28" r="20" fill="none" stroke="#3a3530" stroke-width="0.5" opacity="0.7"/><circle cx="28" cy="28" r="13" fill="none" stroke="#3a3530" stroke-width="0.5" opacity="0.5"/><circle cx="28" cy="28" r="8" fill="none" stroke="#e07840" stroke-width="1.5"/><circle cx="28" cy="28" r="3" fill="#9a4e1e"/></svg>
            <div><div class="card-title">Kind of Blue</div><div class="card-artist">Miles Davis</div><div class="chips"><span class="chip">Columbia</span><span class="chip">1959</span><span class="chip teal">8 listings</span></div></div>
          </div>
        </div>
      </div>
      <p class="note">↑ Banner only shows after at least one scan. Tapping "View →" scrolls to that card.</p>
    </div>
  </div>


  <!-- ══════════════════════════════════════════════════════════
       FEATURE 8 — LABEL FILTERING
  ══════════════════════════════════════════════════════════ -->
  <div class="feature-section" id="f8">
    <div class="feature-label">Feature 08</div>
    <div class="feature-title">Label Filtering</div>
    <div class="feature-desc">Filter chips auto-generated from the label values already stored on each wantlist item. Tap a label to show only records from that label. "All" resets. The labels shown are derived from your actual list — no hardcoding.</div>

    <div class="preview-box">
      <div class="preview-label">Label filter chips — above card list</div>
      <div class="label-filters" id="label-filters">
        <button class="label-chip active" onclick="setLabelActive(this)">All</button>
        <button class="label-chip" onclick="setLabelActive(this)">ACT Music</button>
        <button class="label-chip" onclick="setLabelActive(this)">Columbia</button>
        <button class="label-chip" onclick="setLabelActive(this)">Parlophone</button>
        <button class="label-chip" onclick="setLabelActive(this)">Island</button>
        <button class="label-chip" onclick="setLabelActive(this)">Blue Note</button>
        <button class="label-chip" onclick="setLabelActive(this)">ECM</button>
      </div>
      <div class="card">
        <div class="card-header">
          <div style="display:flex;gap:12px;align-items:flex-start;flex:1;min-width:0">
            <svg class="vinyl-ph" width="48" height="48" viewBox="0 0 56 56" fill="none"><circle cx="28" cy="28" r="27.5" fill="#1c1814" stroke="#3a3530"/><circle cx="28" cy="28" r="20" fill="none" stroke="#3a3530" stroke-width="0.5" opacity="0.7"/><circle cx="28" cy="28" r="13" fill="none" stroke="#3a3530" stroke-width="0.5" opacity="0.5"/><circle cx="28" cy="28" r="8" fill="none" stroke="#e07840" stroke-width="1.5"/><circle cx="28" cy="28" r="3" fill="#9a4e1e"/></svg>
            <div><div class="card-title">Love of My Life</div><div class="card-artist">Nils Landgren</div><div class="chips"><span class="chip">Vinyl</span><span class="chip">ACT Music</span><span class="chip">2026</span></div></div>
          </div>
        </div>
      </div>
      <div class="card">
        <div class="card-header">
          <div style="display:flex;gap:12px;align-items:flex-start;flex:1;min-width:0">
            <svg class="vinyl-ph" width="48" height="48" viewBox="0 0 56 56" fill="none"><circle cx="28" cy="28" r="27.5" fill="#1c1814" stroke="#3a3530"/><circle cx="28" cy="28" r="20" fill="none" stroke="#3a3530" stroke-width="0.5" opacity="0.7"/><circle cx="28" cy="28" r="13" fill="none" stroke="#3a3530" stroke-width="0.5" opacity="0.5"/><circle cx="28" cy="28" r="8" fill="none" stroke="#e07840" stroke-width="1.5"/><circle cx="28" cy="28" r="3" fill="#9a4e1e"/></svg>
            <div><div class="card-title">Kind of Blue</div><div class="card-artist">Miles Davis</div><div class="chips"><span class="chip">Vinyl</span><span class="chip">Columbia</span><span class="chip">1959</span></div></div>
          </div>
        </div>
      </div>
      <p class="note">↑ Chips are interactive. Try clicking a label above.</p>
    </div>
  </div>


  <!-- ══════════════════════════════════════════════════════════
       FEATURE 9 — BREAK-EVEN CALCULATOR
  ══════════════════════════════════════════════════════════ -->
  <div class="feature-section" id="f9">
    <div class="feature-label">Feature 09</div>
    <div class="feature-title">Vinyl vs. Streaming Break-even</div>
    <div class="feature-desc">A small widget on the Compare card. Divides the vinyl best total by your monthly streaming cost to show how many months until the vinyl "pays off" vs. keeping the streaming subscription. You set your streaming cost once — it persists.</div>

    <div class="preview-box">
      <div class="preview-label">Widget on Compare card — below listing rows</div>
      <div class="card">
        <div class="card-header">
          <div style="display:flex;gap:12px;align-items:flex-start;flex:1;min-width:0">
            <svg class="vinyl-ph" width="48" height="48" viewBox="0 0 56 56" fill="none"><circle cx="28" cy="28" r="27.5" fill="#1c1814" stroke="#3a3530"/><circle cx="28" cy="28" r="20" fill="none" stroke="#3a3530" stroke-width="0.5" opacity="0.7"/><circle cx="28" cy="28" r="13" fill="none" stroke="#3a3530" stroke-width="0.5" opacity="0.5"/><circle cx="28" cy="28" r="8" fill="none" stroke="#e07840" stroke-width="1.5"/><circle cx="28" cy="28" r="3" fill="#9a4e1e"/></svg>
            <div><div class="card-title">Love of My Life</div><div class="card-artist">Nils Landgren</div><div class="chips"><span class="chip">2026</span></div></div>
          </div>
          <button class="btn-listen" style="min-width:90px">▶ Listen</button>
        </div>

        <div class="section-label">Discogs marketplace</div>
        <div class="listing-row">
          <div><span class="listing-origin us">Germany</span><span class="listing-count">— 3 for sale</span></div>
          <div><span class="listing-price">$44.58</span><span class="listing-ship">~$22 ship</span></div>
        </div>

        <div class="breakeven-widget" id="breakeven">
          <div class="breakeven-title">Spin or Stream?</div>
          <div class="breakeven-row">
            <span>Best total (vinyl)</span>
            <span id="be-vinyl">$44.58</span>
          </div>
          <div class="breakeven-row">
            <span>Your streaming</span>
            <span>
              $<input class="breakeven-input" type="number" id="be-monthly" value="10.99" min="1" max="50" step="0.01" oninput="calcBreakeven()" /> /mo
            </span>
          </div>
          <div class="breakeven-result" id="be-result">≈ 4 months payback</div>
          <div class="breakeven-result-sub" id="be-sub">Own it after ~4 Spotify payments</div>
        </div>
      </div>
      <p class="note">↑ Try changing the streaming cost — the payback updates live.</p>
    </div>
  </div>


  <!-- ══════════════════════════════════════════════════════════
       FEATURE 10 — PWA INSTALL
  ══════════════════════════════════════════════════════════ -->
  <div class="feature-section" id="f10">
    <div class="feature-label">Feature 10 <span class="shipped-badge">Shipped ✓</span></div>
    <div class="feature-title">PWA / Installable App</div>
    <div class="feature-desc">A web app manifest + service worker (via Vite's PWA plugin) that makes the app installable to the iOS/Android home screen. The install prompt appears once, at the bottom of the screen. After install, the app opens full-screen, no browser chrome.</div>

    <div class="preview-box">
      <div class="preview-label">Install banner — fixed at screen bottom</div>
      <div class="pwa-banner">
        <div class="pwa-icon-wrap">
          <svg class="pwa-icon-inner" width="28" height="28" viewBox="0 0 22 22" fill="none"><circle cx="11" cy="11" r="10.5" fill="#1c1814" stroke="#3a3530"/><circle cx="11" cy="11" r="7.5" fill="none" stroke="#3a3530" stroke-width="0.5" opacity="0.7"/><circle cx="11" cy="11" r="5" fill="none" stroke="#3a3530" stroke-width="0.5" opacity="0.5"/><circle cx="11" cy="11" r="3.2" fill="none" stroke="#e07840" stroke-width="1"/><circle cx="11" cy="11" r="1.2" fill="#9a4e1e"/></svg>
        </div>
        <div class="pwa-text">
          <div class="pwa-title-text">Spin or Stream</div>
          <div class="pwa-sub">Add to Home Screen for quick access</div>
        </div>
        <button class="btn btn-search" style="font-size:9px;padding:7px 14px;flex-shrink:0">Install</button>
        <button class="pwa-dismiss">×</button>
      </div>
      <p class="note">↑ This banner is shown once by the browser when the PWA criteria are met. After install, it never appears again.</p>
    </div>
  </div>


  <!-- ══════════════════════════════════════════════════════════
       FULL INTEGRATED VIEW — WANTLIST
  ══════════════════════════════════════════════════════════ -->
  <div class="divider"></div>
  <div class="feature-section" id="full-wantlist">
    <div class="feature-label">Integrated View</div>
    <div class="feature-title">Full Wantlist — All Features Active</div>
    <div class="feature-desc">What the wantlist looks like with search, sort, label filter, best deal banner, scan progress, and all card badges active at once.</div>

    <div class="full-view">
      <!-- Page header -->
      <div class="page-eyebrow">Your list</div>
      <div class="full-view-title">Wantlist <em style="font-style:italic;color:var(--text-muted)">(4)</em></div>
      <div class="full-view-sub">Scan prices, compare deals, move to collection.</div>

      <!-- Best deal banner (F7) -->
      <div class="best-deal-banner">
        <span class="best-deal-eyebrow">Best deal</span>
        <span class="best-deal-item">Miles Davis — Kind of Blue</span>
        <span class="best-deal-price">$28.50 inc. shipping · US seller</span>
        <a href="#" class="best-deal-link">View →</a>
      </div>

      <!-- Toolbar: search (F1) + sort (F2) + export (F5) -->
      <div class="search-wrap" style="margin-bottom:10px">
        <span class="search-icon">⌕</span>
        <input type="text" class="search-input" placeholder="Search your wantlist…" />
        <span class="search-count">4 items</span>
      </div>
      <div class="toolbar" style="margin-bottom:10px">
        <div class="sort-group">
          <button class="sort-pill">Year ↑</button>
          <button class="sort-pill">Artist ↑</button>
          <button class="sort-pill new active">Price ↑</button>
        </div>
        <div class="toolbar-right">
          <button class="btn btn-secondary" style="font-size:9px;padding:5px 10px;display:flex;align-items:center;gap:4px">↓ CSV</button>
          <button class="btn btn-search" style="font-size:9px;padding:5px 10px">Scan All</button>
        </div>
      </div>

      <!-- Label filters (F8) -->
      <div class="label-filters" style="margin-bottom:14px">
        <button class="label-chip active">All</button>
        <button class="label-chip">ACT Music</button>
        <button class="label-chip">Columbia</button>
        <button class="label-chip">Parlophone</button>
        <button class="label-chip">Island</button>
      </div>

      <!-- Scan progress (F6) -->
      <div class="scan-progress-wrap" style="margin-bottom:14px;background:rgba(74,144,128,0.06);border-color:rgba(74,144,128,0.25)">
        <div class="scan-progress-header">
          <span class="scan-progress-text" style="color:var(--teal)">✓ Scan complete</span>
          <span class="scan-progress-count">4 of 4</span>
        </div>
        <div class="scan-progress-track"><div class="scan-progress-fill" style="width:100%"></div></div>
      </div>

      <!-- Card 1: Miles Davis — cheapest, best deal, in collection (F3), savings badge (F4) -->
      <div class="card">
        <div class="card-header">
          <div style="display:flex;gap:12px;align-items:flex-start;flex:1;min-width:0">
            <svg class="vinyl-ph" width="72" height="72" viewBox="0 0 56 56" fill="none"><circle cx="28" cy="28" r="27.5" fill="#1c1814" stroke="#3a3530"/><circle cx="28" cy="28" r="20" fill="none" stroke="#3a3530" stroke-width="0.5" opacity="0.7"/><circle cx="28" cy="28" r="13" fill="none" stroke="#3a3530" stroke-width="0.5" opacity="0.5"/><circle cx="28" cy="28" r="8" fill="none" stroke="#e07840" stroke-width="1.5"/><circle cx="28" cy="28" r="3" fill="#9a4e1e"/></svg>
            <div>
              <div class="card-title">Kind of Blue</div>
              <div class="card-artist">Miles Davis</div>
              <div class="chips">
                <span class="chip">Columbia</span>
                <span class="chip">1959</span>
                <span class="chip warning">✓ In collection</span>
                <span class="chip savings">−19% vs avg</span>
                <span class="chip teal">8 listings</span>
              </div>
            </div>
          </div>
          <div class="wantlist-right">
            <button class="btn btn-secondary" style="width:100%;font-size:10px">Refresh</button>
            <button class="btn-listen">▶ Listen</button>
          </div>
        </div>
        <div class="price-grid">
          <div class="price-cell"><div class="price-label">Best Total</div><div class="price-value best">$28.50</div><div class="price-sub">inc. shipping</div></div>
          <div class="price-cell"><div class="price-label">Record Only</div><div class="price-value mid">$18.50</div><div class="price-sub">lowest found</div></div>
          <div class="price-cell"><div class="price-label">Avg</div><div class="price-value high">$35.00</div><div class="price-sub">8 listings</div></div>
        </div>
        <div class="progress-wrap">
          <div class="progress-bar-label"><span>Low $18.50</span><span>Avg $35.00</span></div>
          <div class="progress-bar-track"><div class="progress-bar-fill" style="width:53%"></div></div>
        </div>
        <div style="display:flex;justify-content:flex-end;margin-top:12px">
          <button class="btn btn-sync">+ Compare</button>
        </div>
      </div>

      <!-- Card 2: Nils Landgren — scanned, savings badge, normal -->
      <div class="card">
        <div class="card-header">
          <div style="display:flex;gap:12px;align-items:flex-start;flex:1;min-width:0">
            <svg class="vinyl-ph" width="72" height="72" viewBox="0 0 56 56" fill="none"><circle cx="28" cy="28" r="27.5" fill="#1c1814" stroke="#3a3530"/><circle cx="28" cy="28" r="20" fill="none" stroke="#3a3530" stroke-width="0.5" opacity="0.7"/><circle cx="28" cy="28" r="13" fill="none" stroke="#3a3530" stroke-width="0.5" opacity="0.5"/><circle cx="28" cy="28" r="8" fill="none" stroke="#e07840" stroke-width="1.5"/><circle cx="28" cy="28" r="3" fill="#9a4e1e"/></svg>
            <div>
              <div class="card-title">Love of My Life</div>
              <div class="card-artist">Nils Landgren</div>
              <div class="chips">
                <span class="chip">ACT Music</span>
                <span class="chip">2026</span>
                <span class="chip">−3% vs avg</span>
                <span class="chip teal">4 listings</span>
              </div>
            </div>
          </div>
          <div class="wantlist-right">
            <button class="btn btn-secondary" style="width:100%;font-size:10px">Refresh</button>
            <button class="btn-listen">▶ Listen</button>
          </div>
        </div>
        <div class="price-grid">
          <div class="price-cell"><div class="price-label">Best Total</div><div class="price-value best">$54.58</div><div class="price-sub">inc. shipping</div></div>
          <div class="price-cell"><div class="price-label">Record Only</div><div class="price-value mid">$44.58</div><div class="price-sub">lowest found</div></div>
          <div class="price-cell"><div class="price-label">Avg</div><div class="price-value high">$45.81</div><div class="price-sub">4 listings</div></div>
        </div>
        <div style="display:flex;justify-content:flex-end;margin-top:12px">
          <button class="btn btn-sync">+ Compare</button>
        </div>
      </div>

      <!-- Card 3: Radiohead — not scanned -->
      <div class="card dim">
        <div class="card-header">
          <div style="display:flex;gap:12px;align-items:flex-start;flex:1;min-width:0">
            <svg class="vinyl-ph" width="72" height="72" viewBox="0 0 56 56" fill="none"><circle cx="28" cy="28" r="27.5" fill="#1c1814" stroke="#3a3530"/><circle cx="28" cy="28" r="20" fill="none" stroke="#3a3530" stroke-width="0.5" opacity="0.7"/><circle cx="28" cy="28" r="13" fill="none" stroke="#3a3530" stroke-width="0.5" opacity="0.5"/><circle cx="28" cy="28" r="8" fill="none" stroke="#e07840" stroke-width="1.5"/><circle cx="28" cy="28" r="3" fill="#9a4e1e"/></svg>
            <div>
              <div class="card-title">OK Computer</div>
              <div class="card-artist">Radiohead</div>
              <div class="chips"><span class="chip">Parlophone</span><span class="chip">1997</span></div>
            </div>
          </div>
          <div class="wantlist-right">
            <button class="btn btn-search" style="width:100%;font-size:10px">Check Prices</button>
            <button class="btn-listen">▶ Listen</button>
          </div>
        </div>
      </div>

      <!-- Card 4: Amy Winehouse — not scanned -->
      <div class="card dim">
        <div class="card-header">
          <div style="display:flex;gap:12px;align-items:flex-start;flex:1;min-width:0">
            <svg class="vinyl-ph" width="72" height="72" viewBox="0 0 56 56" fill="none"><circle cx="28" cy="28" r="27.5" fill="#1c1814" stroke="#3a3530"/><circle cx="28" cy="28" r="20" fill="none" stroke="#3a3530" stroke-width="0.5" opacity="0.7"/><circle cx="28" cy="28" r="13" fill="none" stroke="#3a3530" stroke-width="0.5" opacity="0.5"/><circle cx="28" cy="28" r="8" fill="none" stroke="#e07840" stroke-width="1.5"/><circle cx="28" cy="28" r="3" fill="#9a4e1e"/></svg>
            <div>
              <div class="card-title">Back to Black</div>
              <div class="card-artist">Amy Winehouse</div>
              <div class="chips"><span class="chip">Island</span><span class="chip">2006</span></div>
            </div>
          </div>
          <div class="wantlist-right">
            <button class="btn btn-search" style="width:100%;font-size:10px">Check Prices</button>
            <button class="btn-listen">▶ Listen</button>
          </div>
        </div>
      </div>

    </div><!-- /full-view -->
  </div>


  <!-- ══════════════════════════════════════════════════════════
       FULL INTEGRATED VIEW — COMPARE CARD
  ══════════════════════════════════════════════════════════ -->
  <div class="feature-section" id="full-compare">
    <div class="feature-label">Integrated View</div>
    <div class="feature-title">Full Compare Card — Break-even Active</div>
    <div class="feature-desc">What a Compare card looks like with the break-even calculator widget added below the listing rows.</div>

    <div class="full-view">
      <div class="page-eyebrow">Side by side</div>
      <div class="full-view-title">Compare <em style="font-style:italic;color:var(--text-muted)">(1)</em></div>
      <div class="full-view-sub">All available prices and where else to find each record.</div>

      <div class="card">
        <div class="card-header">
          <div style="display:flex;gap:12px;align-items:flex-start;flex:1;min-width:0">
            <svg class="vinyl-ph" width="56" height="56" viewBox="0 0 56 56" fill="none"><circle cx="28" cy="28" r="27.5" fill="#1c1814" stroke="#3a3530"/><circle cx="28" cy="28" r="20" fill="none" stroke="#3a3530" stroke-width="0.5" opacity="0.7"/><circle cx="28" cy="28" r="13" fill="none" stroke="#3a3530" stroke-width="0.5" opacity="0.5"/><circle cx="28" cy="28" r="8" fill="none" stroke="#e07840" stroke-width="1.5"/><circle cx="28" cy="28" r="3" fill="#9a4e1e"/></svg>
            <div>
              <div class="card-title">Love of My Life</div>
              <div class="card-artist">Nils Landgren</div>
              <div class="chips"><span class="chip">2026</span></div>
            </div>
          </div>
          <div style="display:flex;align-items:center;gap:6px;flex-shrink:0">
            <button class="btn-listen" style="min-width:90px">▶ Listen</button>
            <button style="background:none;border:none;color:var(--text-dim);cursor:pointer;font-size:16px;padding:0 4px">×</button>
          </div>
        </div>

        <div class="section-label" style="margin-top:14px">Discogs marketplace</div>
        <div class="listing-row">
          <div><span class="listing-origin us">Germany</span><span class="listing-count">— 1 for sale</span></div>
          <div><span class="listing-price">$47.05</span><span class="listing-ship">~$22 ship</span></div>
        </div>
        <div class="listing-row">
          <div><span class="listing-origin us">Germany</span><span class="listing-count">— 3 for sale</span></div>
          <div><span class="listing-price">$44.58</span><span class="listing-ship">~$22 ship</span></div>
        </div>
        <div class="progress-wrap">
          <div class="progress-bar-label"><span>Low $44.58</span><span>Avg $45.81</span></div>
          <div class="progress-bar-track"><div class="progress-bar-fill" style="width:97%"></div></div>
        </div>

        <!-- Break-even widget (F9) -->
        <div class="breakeven-widget" style="margin-top:14px">
          <div class="breakeven-title">Spin or Stream?</div>
          <div class="breakeven-row">
            <span>Best total (vinyl)</span>
            <span>$44.58</span>
          </div>
          <div class="breakeven-row">
            <span>Your streaming</span>
            <span>$<input class="breakeven-input" type="number" value="10.99" min="1" max="50" step="0.01" oninput="calcBreakeven2(this)" /> /mo</span>
          </div>
          <div class="breakeven-result" id="be-result2">≈ 4 months payback</div>
          <div class="breakeven-result-sub" id="be-sub2">Own it after ~4 streaming payments</div>
        </div>

        <div class="section-label" style="margin-top:16px">Find elsewhere</div>
        <div class="find-retail">
          <button class="btn-brand btn-brand-amazon">Amazon</button>
          <button class="btn-brand btn-brand-walmart">Walmart</button>
          <button class="btn-brand btn-brand-target">Target</button>
        </div>
        <div class="find-streaming">
          <button class="btn-brand btn-brand-bandcamp">Bandcamp</button>
          <button class="btn-brand btn-brand-discogs">Discogs</button>
        </div>

      </div>
    </div><!-- /full-view -->
  </div>

  <div class="divider"></div>

  <!-- ══════════════════════════════════════════════════════════
       FEATURE 11 — MUSIC DISCOVERY
  ══════════════════════════════════════════════════════════ -->
  <div class="feature-section" id="f11">
    <div class="feature-label">Experimental · Feature 11 <span class="shipped-badge">Shipped ✓</span></div>
    <div class="feature-title">Music Discovery</div>
    <div class="feature-desc">New recommended albums pulled from Bandcamp Daily Essential Releases, Pitchfork Best New Music, and Stereogum Album Reviews via public RSS feeds. Deduplicates across sources, refreshes every 6 hours. Visible only when Experimental Features is enabled in Settings.</div>

    <!-- Isolated: source filters + cards -->
    <div class="preview-box" style="margin-bottom:16px">
      <div class="preview-label">Isolated · Source filters + album cards</div>

      <div class="discover-filters">
        <button class="discover-filter active" onclick="setDiscoverFilter(this, 'all')">All</button>
        <button class="discover-filter bandcamp" onclick="setDiscoverFilter(this, 'bandcamp')">Bandcamp Daily</button>
        <button class="discover-filter pitchfork" onclick="setDiscoverFilter(this, 'pitchfork')">Pitchfork BNM</button>
        <button class="discover-filter stereogum" onclick="setDiscoverFilter(this, 'stereogum')">Stereogum</button>
      </div>

      <div id="discover-cards">
        <!-- Card 1: Pitchfork + Stereogum (cross-source) -->
        <div class="discover-card" data-sources="pitchfork stereogum">
          <div class="discover-art">
            <svg width="24" height="24" viewBox="0 0 24 24" fill="none"><circle cx="12" cy="12" r="10" stroke="#3a3530" stroke-width="1.5"/><circle cx="12" cy="12" r="4" stroke="#3a3530" stroke-width="1"/><circle cx="12" cy="12" r="1.5" fill="#3a3530"/></svg>
          </div>
          <div class="discover-body">
            <div class="discover-title">Only God Was Above Us</div>
            <div class="discover-artist">Vampire Weekend</div>
            <div class="discover-meta">
              <span class="source-badge multi">2 sources</span>
              <span class="source-badge pitchfork">Pitchfork</span>
              <span class="source-badge stereogum">Stereogum</span>
              <span class="chip">Indie Rock</span>
              <span class="chip">Art Rock</span>
              <span class="score-chip">9.0</span>
            </div>
            <div class="discover-actions">
              <button class="btn-add-wantlist">+ Add to Wantlist</button>
              <span class="discover-date">Mar 5, 2024</span>
            </div>
          </div>
        </div>

        <!-- Card 2: Pitchfork BNM -->
        <div class="discover-card" data-sources="pitchfork">
          <div class="discover-art">
            <svg width="24" height="24" viewBox="0 0 24 24" fill="none"><circle cx="12" cy="12" r="10" stroke="#3a3530" stroke-width="1.5"/><circle cx="12" cy="12" r="4" stroke="#3a3530" stroke-width="1"/><circle cx="12" cy="12" r="1.5" fill="#3a3530"/></svg>
          </div>
          <div class="discover-body">
            <div class="discover-title">Manning Fireworks</div>
            <div class="discover-artist">MJ Lenderman</div>
            <div class="discover-meta">
              <span class="source-badge pitchfork">Pitchfork BNM</span>
              <span class="chip">Indie Rock</span>
              <span class="chip">Slacker Rock</span>
              <span class="score-chip">8.6</span>
            </div>
            <div class="discover-actions">
              <button class="btn-add-wantlist">+ Add to Wantlist</button>
              <span class="discover-date">Sep 6, 2024</span>
            </div>
          </div>
        </div>

        <!-- Card 3: Bandcamp Daily -->
        <div class="discover-card" data-sources="bandcamp">
          <div class="discover-art">
            <svg width="24" height="24" viewBox="0 0 24 24" fill="none"><circle cx="12" cy="12" r="10" stroke="#3a3530" stroke-width="1.5"/><circle cx="12" cy="12" r="4" stroke="#3a3530" stroke-width="1"/><circle cx="12" cy="12" r="1.5" fill="#3a3530"/></svg>
          </div>
          <div class="discover-body">
            <div class="discover-title">Perceive Its Beauty, Acknowledge Its Grace</div>
            <div class="discover-artist">Shabaka</div>
            <div class="discover-meta">
              <span class="source-badge bandcamp">Bandcamp Daily</span>
              <span class="chip">Jazz</span>
              <span class="chip">Spiritual Jazz</span>
            </div>
            <div class="discover-actions">
              <button class="btn-add-wantlist">+ Add to Wantlist</button>
              <span class="discover-date">Apr 19, 2024</span>
            </div>
          </div>
        </div>

        <!-- Card 4: Stereogum -->
        <div class="discover-card" data-sources="stereogum">
          <div class="discover-art">
            <svg width="24" height="24" viewBox="0 0 24 24" fill="none"><circle cx="12" cy="12" r="10" stroke="#3a3530" stroke-width="1.5"/><circle cx="12" cy="12" r="4" stroke="#3a3530" stroke-width="1"/><circle cx="12" cy="12" r="1.5" fill="#3a3530"/></svg>
          </div>
          <div class="discover-body">
            <div class="discover-title">Bright Future</div>
            <div class="discover-artist">Adrianne Lenker</div>
            <div class="discover-meta">
              <span class="source-badge stereogum">Stereogum</span>
              <span class="chip">Folk</span>
              <span class="chip">Indie Folk</span>
            </div>
            <div class="discover-actions">
              <button class="btn-add-wantlist">+ Add to Wantlist</button>
              <span class="discover-date">Mar 22, 2024</span>
            </div>
          </div>
        </div>
      </div><!-- /discover-cards -->
    </div><!-- /preview-box -->

    <!-- Integrated: how it appears in the app -->
    <div class="preview-box">
      <div class="preview-label">Integrated · Full Discover tab in app context</div>
      <div class="full-view">
        <div class="page-eyebrow">What's New</div>
        <div class="full-view-title">Discover <span style="font-family:'DM Mono',monospace;font-size:14px;color:var(--text-muted)">(4)</span></div>
        <div class="full-view-sub" style="margin-bottom:16px">New recommendations from Bandcamp Daily, Pitchfork, and Stereogum · Updated 2h ago</div>

        <div class="discover-filters" style="margin-bottom:16px">
          <button class="discover-filter active" onclick="setDiscoverFilter2(this,'all')">All</button>
          <button class="discover-filter bandcamp" onclick="setDiscoverFilter2(this,'bandcamp')">Bandcamp Daily</button>
          <button class="discover-filter pitchfork" onclick="setDiscoverFilter2(this,'pitchfork')">Pitchfork BNM</button>
          <button class="discover-filter stereogum" onclick="setDiscoverFilter2(this,'stereogum')">Stereogum</button>
        </div>

        <div id="discover-cards2">
          <div class="discover-card" data-sources2="pitchfork stereogum">
            <div class="discover-art"><svg width="24" height="24" viewBox="0 0 24 24" fill="none"><circle cx="12" cy="12" r="10" stroke="#3a3530" stroke-width="1.5"/><circle cx="12" cy="12" r="4" stroke="#3a3530" stroke-width="1"/><circle cx="12" cy="12" r="1.5" fill="#3a3530"/></svg></div>
            <div class="discover-body">
              <div class="discover-title">Only God Was Above Us</div>
              <div class="discover-artist">Vampire Weekend</div>
              <div class="discover-meta"><span class="source-badge multi">2 sources</span><span class="chip">Indie Rock</span><span class="score-chip">9.0</span></div>
              <div class="discover-actions"><button class="btn-add-wantlist">+ Add to Wantlist</button><span class="discover-date">Mar 5, 2024</span></div>
            </div>
          </div>
          <div class="discover-card" data-sources2="pitchfork">
            <div class="discover-art"><svg width="24" height="24" viewBox="0 0 24 24" fill="none"><circle cx="12" cy="12" r="10" stroke="#3a3530" stroke-width="1.5"/><circle cx="12" cy="12" r="4" stroke="#3a3530" stroke-width="1"/><circle cx="12" cy="12" r="1.5" fill="#3a3530"/></svg></div>
            <div class="discover-body">
              <div class="discover-title">Manning Fireworks</div>
              <div class="discover-artist">MJ Lenderman</div>
              <div class="discover-meta"><span class="source-badge pitchfork">Pitchfork BNM</span><span class="chip">Indie Rock</span><span class="score-chip">8.6</span></div>
              <div class="discover-actions"><button class="btn-add-wantlist">+ Add to Wantlist</button><span class="discover-date">Sep 6, 2024</span></div>
            </div>
          </div>
          <div class="discover-card" data-sources2="bandcamp">
            <div class="discover-art"><svg width="24" height="24" viewBox="0 0 24 24" fill="none"><circle cx="12" cy="12" r="10" stroke="#3a3530" stroke-width="1.5"/><circle cx="12" cy="12" r="4" stroke="#3a3530" stroke-width="1"/><circle cx="12" cy="12" r="1.5" fill="#3a3530"/></svg></div>
            <div class="discover-body">
              <div class="discover-title">Perceive Its Beauty, Acknowledge Its Grace</div>
              <div class="discover-artist">Shabaka</div>
              <div class="discover-meta"><span class="source-badge bandcamp">Bandcamp Daily</span><span class="chip">Jazz</span></div>
              <div class="discover-actions"><button class="btn-add-wantlist">+ Add to Wantlist</button><span class="discover-date">Apr 19, 2024</span></div>
            </div>
          </div>
          <div class="discover-card" data-sources2="stereogum">
            <div class="discover-art"><svg width="24" height="24" viewBox="0 0 24 24" fill="none"><circle cx="12" cy="12" r="10" stroke="#3a3530" stroke-width="1.5"/><circle cx="12" cy="12" r="4" stroke="#3a3530" stroke-width="1"/><circle cx="12" cy="12" r="1.5" fill="#3a3530"/></svg></div>
            <div class="discover-body">
              <div class="discover-title">Bright Future</div>
              <div class="discover-artist">Adrianne Lenker</div>
              <div class="discover-meta"><span class="source-badge stereogum">Stereogum</span><span class="chip">Folk</span></div>
              <div class="discover-actions"><button class="btn-add-wantlist">+ Add to Wantlist</button><span class="discover-date">Mar 22, 2024</span></div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div><!-- /feature 11 -->

  <div class="divider"></div>

  <!-- ══════════════════════════════════════════════════════════
       SETTINGS PANEL PREVIEW
  ══════════════════════════════════════════════════════════ -->
  <div class="feature-section" id="f-settings">
    <div class="feature-label">Foundation <span class="shipped-badge">Shipped ✓</span></div>
    <div class="feature-title">Settings Panel</div>
    <div class="feature-desc">Opens when Settings is clicked in the sidebar. Houses the Experimental Features toggle — the gate for Music Discovery and future experimental work. Simple, low visual weight.</div>

    <div class="settings-panel">
      <div class="settings-section-label">Experimental Features</div>

      <div class="settings-row">
        <div>
          <div class="settings-row-label">Enable Experimental Features</div>
          <div class="settings-row-desc">Unlocks features that are in active development. Currently adds a <strong style="color:var(--text)">Discover</strong> tab with new music recommendations from Bandcamp Daily, Pitchfork, and Stereogum. May change or break between updates.</div>
        </div>
        <label class="toggle-wrap">
          <input type="checkbox" id="exp-toggle" onchange="handleExpToggle(this)" />
          <span class="toggle-track"></span>
        </label>
      </div>

      <div id="exp-status" style="font-size:10px;color:var(--text-dim);margin-top:12px;display:none">
        ✓ Experimental features enabled — <strong style="color:var(--teal)">Discover</strong> tab is now visible in the sidebar.
      </div>
    </div>
  </div><!-- /settings -->

</div><!-- /page -->

<script>
  // ── Feature 1: Search ──
  function handleSearch(val) {
    const q = val.toLowerCase().trim();
    const cards = document.querySelectorAll('#search-results .card');
    let visible = 0;
    cards.forEach(card => {
      const title = card.dataset.title || '';
      const show = !q || title.includes(q);
      card.style.display = show ? '' : 'none';
      if (show) visible++;
    });
    const total = cards.length;
    document.getElementById('search-count').textContent = q
      ? `${visible} of ${total}`
      : `${total} items`;
  }

  // ── Feature 2: Sort pills ──
  function setSortActive(btn) {
    btn.closest('.sort-group, .preview-box div').querySelectorAll('.sort-pill').forEach(p => p.classList.remove('active'));
    btn.classList.add('active');
  }

  // ── Feature 8: Label filter ──
  function setLabelActive(btn) {
    btn.closest('.label-filters').querySelectorAll('.label-chip').forEach(c => c.classList.remove('active'));
    btn.classList.add('active');
  }

  // ── Feature 11: Music Discovery filters ──
  function setDiscoverFilter(btn, source) {
    btn.closest('.discover-filters').querySelectorAll('.discover-filter').forEach(b => b.classList.remove('active'));
    btn.classList.add('active');
    document.querySelectorAll('#discover-cards .discover-card').forEach(card => {
      const sources = card.dataset.sources || '';
      card.style.display = (source === 'all' || sources.includes(source)) ? '' : 'none';
    });
  }
  function setDiscoverFilter2(btn, source) {
    btn.closest('.discover-filters').querySelectorAll('.discover-filter').forEach(b => b.classList.remove('active'));
    btn.classList.add('active');
    document.querySelectorAll('#discover-cards2 .discover-card').forEach(card => {
      const sources = card.dataset.sources2 || '';
      card.style.display = (source === 'all' || sources.includes(source)) ? '' : 'none';
    });
  }
  function handleExpToggle(cb) {
    document.getElementById('exp-status').style.display = cb.checked ? 'block' : 'none';
  }

  // ── Feature 9: Break-even calculator ──
  function calcBreakeven() {
    const vinyl = 44.58;
    const monthly = parseFloat(document.getElementById('be-monthly').value) || 10.99;
    const months = Math.ceil(vinyl / monthly);
    document.getElementById('be-result').textContent = `≈ ${months} month${months !== 1 ? 's' : ''} payback`;
    document.getElementById('be-sub').textContent = `Own it after ~${months} streaming payment${months !== 1 ? 's' : ''}`;
  }
  function calcBreakeven2(input) {
    const vinyl = 44.58;
    const monthly = parseFloat(input.value) || 10.99;
    const months = Math.ceil(vinyl / monthly);
    document.getElementById('be-result2').textContent = `≈ ${months} month${months !== 1 ? 's' : ''} payback`;
    document.getElementById('be-sub2').textContent = `Own it after ~${months} streaming payment${months !== 1 ? 's' : ''}`;
  }
</script>
</body>
</html>
